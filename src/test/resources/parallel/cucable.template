package runners;

import org.openqa.selenium.SessionNotCreatedException;
import activesupport.driver.Browser;
import org.junit.jupiter.api.AfterAll;
import cucumber.api.CucumberOptions;
import cucumber.api.junit.Cucumber;
import org.junit.runner.RunWith;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import cucumber.api.java.Before;

 @RunWith(Cucumber.class)
 @CucumberOptions(plugin = {"io.qameta.allure.cucumber4jvm.AllureCucumber4Jvm", "json:target/results.json"},
         features = {"src/test/resources/parallel/features/[CUCABLE:FEATURE].feature"},
         glue = {"org.dvsa.testing.framework.stepdefs"}
 )
 public class [CUCABLE:RUNNER] {

    @Before
    public void deleteRunnersFolder() throws IOException {
        Path path = Paths.get(System.getProperty("user.dir") + "src/test/java/runners");
        if (Files.exists(path)) {
            Files.delete(path);
        }
    }

   @AfterAll
    public static void tearDown(){
         try {
             if(Browser.isBrowserOpen())
             Browser.closeBrowser();
         } catch (SessionNotCreatedException ignored) { }
     }
 }